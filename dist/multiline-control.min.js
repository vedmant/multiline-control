!function(t,n,e,i){function a(n,e){this._name=s,this.element=n,this.$element=t(n);var i=o(this.$element.data("options"));this.options=t.extend({},r,e),this.options=t.extend({},this.options,i),this.init()}function o(t){if(t===i)return[];var n=[];return t.split(";").forEach(function(t){var e=t.split(":");2==e.length&&(n[e[0].trim()]=e[1].trim())}),n}var s="multiline_control",r={sortable:!0,template_container:'<div class="multiline-control"></div>',template_add_btn:'<a href="#" class="mc-add-btn btn btn-success btn-sm">Add</a>',template_line:'         <div class="form-group mc-row">            <div class="input-group">               <input type="text" class="form-control" value="{value}">               <a href="#" class="input-group-addon btn btn-default btn-sm mc-remove-btn"><i class="glyphicon glyphicon-remove"></i></a>            </div>         </div>'};a.prototype={init:function(){var t=this;this.$element.hide(),this.build_template(),this.bind_events();var n=this.$element.val().split(/\n/);n.forEach(function(n,e){""!=n&&t.add_line(n)})},build_template:function(){this.$container=t(this.options.template_container),this.$element.after(this.$container),this.$add_btn=t(this.options.template_add_btn),this.$container.after(this.$add_btn)},bind_events:function(){var n=this;this.$add_btn.click(function(t){t.preventDefault(),n.add_line(),n.$container.find("input").last().focus()}),this.$container.on("click",".mc-remove-btn",function(e){e.preventDefault(),n.remove_line(t(this))}),this.$container.on("blur","input",function(){n.update_textarea()}),this.$container.on("keydown","input",function(e){switch(e.which){case 13:return n.add_line("",t(e.target)).find("input").focus(),!1;case 8:if(""==t(e.target).val())return t(e.target).closest(".mc-row").prev().find("input").focus(),n.remove_line(t(e.target)),!1}})},update_textarea:function(){var n="";this.$container.find("input").each(function(){""!=t(this).val()&&(n+=t(this).val()+"\n")}),this.$element.val(n)},add_line:function(n,e){"undefined"==typeof n&&(n="");var i=t(this.options.template_line.replace("{value}",n));return"undefined"!=typeof e?e.closest(".mc-row").after(i):this.$container.append(i),i},remove_line:function(t){t.closest(".mc-row").remove(),this.update_textarea()},remove:function(){this.$container.remove(),this.$add_btn.remove(),this.$element.show(),this.$element.removeData("plugin_"+this._name)}},t.fn[s]=function(n){var e=[].slice.call(arguments,1);return this.each(function(){t.data(this,"plugin_"+s)?t.isFunction(a.prototype[n])&&t.data(this,"plugin_"+s)[n].apply(t.data(this,"plugin_"+s),e):t.data(this,"plugin_"+s,new a(this,n))})}}(jQuery,window,document);